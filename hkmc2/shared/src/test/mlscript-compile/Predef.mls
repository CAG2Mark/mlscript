
declare val String
declare val console

module Predef with ...

fun id(x) = x

fun not(x) = x is false

fun (|>) pipe(x, f) = f(x)

fun (|>.) call(receiver, f)(arg) = f.call(receiver, arg)

fun print(x) =
  console.log(String(x))

fun tupleSlice(xs, i, j) =
  globalThis.Array.prototype.slice.call(xs, i, xs.length - j)

fun tupleGet(xs, i) =
  globalThis.Array.prototype.at.call(xs, i)

fun checkArgs(functionName, expected, got) =
  if got != expected then
    let name = if functionName.length > 0 then " '" + functionName + "'" else ""
    throw globalThis.Error("Function" + name + " expected " + expected + " arguments but got " + got)
  else ()