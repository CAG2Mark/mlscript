:js


import "../../mlscript-compile/Option.mls"


Option.test()
//│ > 2134


open Option { isDefined }

Option.None isDefined()
//│ = false

Option.Some(1) isDefined()
//│ = true


open Option
  Some, None
  isDefined

:sjs
None isDefined()
//│ JS:
//│ Option.isDefined(Option.None)
//│ = false

:fixme
case Some(x) then x
//│ ╔══[PARSE ERROR] Expected block after `case` keyword; found identifier instead
//│ ║  l.31: 	case Some(x) then x
//│ ╙──      	     ^^^^
//│ /!!!\ Uncaught error: scala.MatchError: InfixApp(Jux(Error(),App(Ident(Some),Tup(List(Ident(x))))),keyword 'then',Ident(x)) (of class hkmc2.syntax.Tree$InfixApp)

:fixme
case { Some(x) then x }
//│ ╔══[ERROR] mismatched arity: expect 0, found 1
//│ ║  l.38: 	case { Some(x) then x }
//│ ╙──      	       ^^^^^^^
//│ ╔══[ERROR] Name not found: x
//│ ║  l.38: 	case { Some(x) then x }
//│ ╙──      	                    ^
//│ /!!!\ Uncaught error: java.lang.Exception: Internal Error: Program reached and unexpected state.

Some(1) isDefined()
//│ = true

Some(1)
  isDefined()
//│ = true

:sjs
(new Some(1)) isDefined()
//│ JS:
//│ let tmp; tmp = new Option.Some.class(1); Option.isDefined(tmp)
//│ = true

:re
new Some(1) isDefined()
//│ ═══[RUNTIME ERROR] TypeError: tmp1 is not a constructor

:re
new Some(1)
  isDefined()
//│ ═══[RUNTIME ERROR] TypeError: tmp1 is not a constructor


open Option { Some, None, isDefined }

(new Some(1)) isDefined()
//│ = true

None isDefined()
//│ = false

None == Option.None
//│ = true


:e
Option.oops
//│ ╔══[ERROR] Module 'Option' does not contain member 'oops'
//│ ║  l.83: 	Option.oops
//│ ╙──      	      ^^^^^

:e
open Option { oops }
//│ ╔══[ERROR] Module 'Option' does not contain member 'oops'
//│ ║  l.89: 	open Option { oops }
//│ ╙──      	              ^^^^

oops

:e
Option.None.oops
//│ ╔══[ERROR] Module 'None' does not contain member 'oops'
//│ ║  l.97: 	Option.None.oops
//│ ╙──      	           ^^^^^


