:js

:import PredefJS.mls
//│ Imported 2 member(s)


:sjs
fun test(a) =
  class C with { val x = a }
  new C
//│ JS:
//│ function test(...args) {
//│   globalThis.Predef.checkArgs("test", 1, true, args.length);
//│   let a = args[0];
//│   class C {
//│     constructor() {
//│       this.x = a;
//│     }
//│     toString() { return "C"; }
//│   }
//│   return new C();
//│ }
//│ undefined

test(12)
//│ = C { x: 12 }


:sjs
fun test(x) =
  class Foo(a, b)
  Foo(x, x + 1)
//│ JS:
//│ function test(...args) {
//│   globalThis.Predef.checkArgs("test", 1, true, args.length);
//│   let x = args[0];
//│   let tmp;
//│   function Foo(...args1) { return new Foo.class(...args1); }
//│   Foo.class = class Foo {
//│     constructor(a, b) {
//│       this.a = a;
//│       this.b = b;
//│       
//│     }
//│     toString() { return "Foo(" + this.a + ", " + this.b + ")"; }
//│   };
//│   tmp = x + 1;
//│   return Foo(x, tmp) ?? null;
//│ }
//│ undefined


test(123)
//│ = Foo { a: 123, b: 124 }


// * Forgot to pass the arg:
:re
test()
//│ ═══[RUNTIME ERROR] Error: Function 'test' expected 1 arguments but got 0


