:js


fun foo() =
  1 + 2

foo
//│ = [Function: foo]

foo()
//│ = 3

fun foo(x) =
  x + 1

foo(123)
//│ = 124

fun foo(x) =
  x + 1 + 2

foo(123)
//│ = 126

fun foo() = bar()
fun bar() = 42

bar()
//│ = 42

foo()
//│ = 42

fun foo() = bar()
let r = foo()
fun bar() = 42
r
//│ = 42

// TODO raise initialization error at CT and RT
fun foo() = bar()
let r = foo()
fun bar() = r
r
//│ = 42


declare val console

fun outer(x) =
  let r = x + 1
  fun nested(y) =
    r + x + y
  console.log(nested(x))
  nested

let f = outer(100)
f(200)
//│ > 301
//│ = 401
//│ f = [Function: nested]

// f(200)

outer(100)
//│ > 301
//│ = [Function: nested]

outer(100)(200)
//│ > 301
//│ = 401





