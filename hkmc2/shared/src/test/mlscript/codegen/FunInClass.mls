:js

:import PredefJS.mls
//│ Imported 2 member(s)


fun test() =
  class C(a) with { fun f() = a }
  C(0).f()

test()
//│ = 0


:sjs
fun test(a) =
  class Inner(b) with
    log(a)
    fun f(c) = [a, b, c]
    fun g(d) =
      fun h(e) = [a, b, d, e]
      h(d)
  Inner(42)
//│ JS:
//│ function test(a) {
//│   function Inner(b1) { return new Inner.class(b1); };
//│   Inner.class = class Inner {
//│     constructor(b) {
//│       this.b = b;
//│       let tmp;
//│       tmp = globalThis.log(a);
//│     }
//│     f(c) {
//│       return [
//│         a,
//│         this.b,
//│         c
//│       ];
//│     } 
//│     g(d) {
//│       
//│       const this$Inner = this;
//│       function h(e) {
//│         return [
//│           a,
//│           this$Inner.b,
//│           d,
//│           e
//│         ];
//│       }
//│       return h(d);
//│     }
//│     toString() { return "Inner(" + this.b + ")"; }
//│   };
//│   return Inner(42);
//│ }
//│ undefined

let i = test(100)
//│ > 100
//│ i = Inner { b: 42 }

i.f(200)
//│ = [ 100, 42, 200 ]

i.g(200)
//│ = [ 100, 42, 200, 200 ]


