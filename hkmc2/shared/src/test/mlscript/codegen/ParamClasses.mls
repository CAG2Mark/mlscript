:js

:import PredefJS.mls
//│ Imported 1 member(s)

:global
:sjs


class Foo()
//│ JS:
//│ this.Foo = class Foo { constructor() {  } }; undefined

Foo
//│ JS:
//│ () => { return new this.Foo() }
//│ = [Function (anonymous)]

Foo()
//│ JS:
//│ new this.Foo()
//│ = Foo {}


class Foo(a)
//│ JS:
//│ this.Foo = class Foo { constructor(a) { this.a = a;  } }; undefined

Foo
//│ JS:
//│ (a) => { return new this.Foo(a) }
//│ = [Function (anonymous)]

Foo(1)
//│ JS:
//│ new this.Foo(1)
//│ = Foo { a: 1 }

Foo(1).a
//│ JS:
//│ let tmp; tmp = new this.Foo(1); tmp.a
//│ = 1


class Foo(a, b)
//│ JS:
//│ this.Foo = class Foo { constructor(a, b) { this.a = a; this.b = b;  } }; undefined

let f = Foo
//│ JS:
//│ this.f = (a, b) => { return new this.Foo(a, b) }; undefined
//│ f = [Function (anonymous)]

let f = f(1, 2)
//│ JS:
//│ let tmp; tmp = this.f(1, 2); this.f = tmp; undefined
//│ f = Foo { a: 1, b: 2 }

f.a
//│ JS:
//│ this.f.a
//│ = 1

f.b
//│ JS:
//│ this.f.b
//│ = 2

let f = Foo(1, 2)
//│ JS:
//│ let tmp; tmp = new this.Foo(1, 2); this.f = tmp; undefined
//│ f = Foo { a: 1, b: 2 }

f.a
//│ JS:
//│ this.f.a
//│ = 1

f.b
//│ JS:
//│ this.f.b
//│ = 2

Foo(log(1), log(2))
//│ JS:
//│ let tmp, tmp1; tmp = log(1); tmp1 = log(2); new this.Foo(tmp, tmp1)
//│ > 1
//│ > 2
//│ = Foo { a: undefined, b: undefined }


class Inner(c) with
  fun i1(d) = c + d
  log(c)
//│ JS:
//│ this.Inner = class Inner {
//│   constructor(c) {
//│     this.c = c;
//│     log(this.c)
//│   }
//│   i1(d) {
//│     return this.c + d
//│   }
//│ };
//│ undefined

let i = new Inner(100)
//│ JS:
//│ let tmp; tmp = new this.Inner(100); this.i = tmp; undefined
//│ > 100
//│ i = Inner { c: 100 }

i.i1(20)
//│ JS:
//│ this.i.i1(20)
//│ = 120


