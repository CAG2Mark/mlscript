:js

:expect 5050
fun sum(n) =
  if n == 0 then 0
  else
    n + sum(n - 1)
sum(100)
//│ = 5050

// FIXME: __Return is leaked 
:stackSafe 1000
:handler
:expect __Return { value: 5000050000 }
fun sum(n) =
  if n == 0 then 0
  else
    n + sum(n - 1)
sum(100000)
//│ = __Return { value: 5000050000 }

:re
fun sum(n) =
  if n == 0 then 0
  else
    n + sum(n - 1)
sum(100000)
//│ ═══[RUNTIME ERROR] RangeError: Maximum call stack size exceeded
