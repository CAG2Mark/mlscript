class C with {
  // regular method foo
  fun foo(x) = x
}

module M with {
  // module method foo
  fun foo(x) = x
  // module method self
  fun self(): module M = M
}

:e
fun f1(module m)
//│ ╔══[ERROR] Module parameters must have explicit types.
//│ ║  l.14: 	fun f1(module m)
//│ ╙──      	              ^

:e
fun f2[T](module m: T)
//│ ╔══[ERROR] Module parameters must have concrete types.
//│ ║  l.20: 	fun f2[T](module m: T)
//│ ╙──      	                 ^^^^

:e
module N with {
  fun f3() = M
}
//│ ╔══[ERROR] Function returning module values must have explicit return types.
//│ ║  l.27: 	  fun f3() = M
//│ ╙──      	      ^^^^

:e
module N with {
  fun f4[T](): module T = M
}
//│ ╔══[ERROR] Function returning module values must have explicit return types.
//│ ║  l.35: 	  fun f4[T](): module T = M
//│ ╙──      	      ^^^^^^^^^^^^^^^^^

:e
module N with {
  fun f5(): M = M
}
//│ ╔══[ERROR] The return type of functions returning module values must be prefixed with module keyword.
//│ ║  l.43: 	  fun f5(): M = M
//│ ╙──      	      ^^^^^^^


fun f6(m: M)

:e
f6(M)
//│ ╔══[ERROR] Only module parameters may receive module arguments (values).
//│ ║  l.53: 	f6(M)
//│ ╙──      	   ^

:e
f6(M.self())
//│ ╔══[ERROR] Only module parameters may receive module arguments (values).
//│ ║  l.59: 	f6(M.self())
//│ ╙──      	   ^^^^^^^^

:e
fun f7(): module M
//│ ╔══[ERROR] Only module methods may return module values.
//│ ║  l.65: 	fun f7(): module M
//│ ╙──      	    ^^^^^^^^^^^^^^


fun ok1(module m: M)

module N with {
  fun ok2(): module M = M
}

ok1(M)

ok1(M.self())
