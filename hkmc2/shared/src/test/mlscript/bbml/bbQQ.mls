:global
:bbml


`42
//│ Type: CodeBase[out Int, ⊥, ?]

`false
//│ Type: CodeBase[out Bool, ⊥, ?]

`"rua"
//│ Type: CodeBase[out Str, ⊥, ?]

`3.14
//│ Type: CodeBase[out Num, ⊥, ?]


x `=> x
//│ Type: CodeBase[out α1_3 ->{⊥} α1_3, ⊥, ?]

x `=> `42
//│ Type: CodeBase[out ⊤ ->{⊥} Int, ⊥, ?]

:e
x `=> 42
//│ ╔══[ERROR] Type error in term ${42}
//│ ╙── because: cannot constrain  Int  <:  CodeBase[out α13_3, out α14_3, ?]
//│ Type: CodeBase[out ⊤ ->{⊥} ⊥, ⊥, ?]


f `=> x `=> f`(x)
//│ Type: CodeBase[out (α26_3 ->{⊥} α27_3) ->{⊥} (α26_3 ->{⊥} α27_3), ⊥, ?]


x `=> y `=> x `+ y
//│ Type: CodeBase[out Int ->{⊥} (Int ->{⊥} Int), ⊥, ?]


(x, y) `=> x `+ y
//│ Type: CodeBase[out (Int, Int) ->{⊥} Int, ⊥, ?]

(x, y, z) `=> x `+ y `+ z
//│ Type: CodeBase[out (Int, Int, Int) ->{⊥} Int, ⊥, ?]

f `=> x `=> y `=> f`(x, y)
//│ Type: CodeBase[out ((α98_3, α100_3) ->{⊥} α101_3) ->{⊥} (α98_3 ->{⊥} (α100_3 ->{⊥} α101_3)), ⊥, ?]

`let x = `42 `in x
//│ Type: CodeBase[out Int, ⊥, ?]

:e
`let x = 42 `in x
//│ ╔══[ERROR] Type error in term ${42}
//│ ╙── because: cannot constrain  Int  <:  CodeBase[out α123_2, out α124_2, ?]
//│ Type: CodeBase[⊥, ⊥, ?]

:e
`let x = `0 `in 1
//│ ╔══[ERROR] Type error in term ${1}
//│ ╙── because: cannot constrain  Int  <:  CodeBase[out α132_3, out α133_3, ?]
//│ Type: CodeBase[⊥, ⊥, ?]


`if `true then `true else `false
//│ Type: CodeBase[out Bool, ⊥, ?]


x `=> `if x `== `0.0 then `1.0 else x
//│ Type: CodeBase[out α141_3 ->{⊥} (α141_3 ∨ Num), ⊥, ?]

run(`1)
//│ Type: Int

:e
run(1)
//│ ╔══[ERROR] Type error in term 1 with expected type CodeBase[out α159_1, ⊥, ?]
//│ ╙── because: cannot constrain  Int  <:  CodeBase[out α159_1, ⊥, ?]
//│ Type: ⊥

:e
x `=> run(x)
//│ ╔══[ERROR] Type error in term x@2#0 with expected type CodeBase[out α162_3, ⊥, ?]
//│ ╟── because: cannot constrain  CodeBase[α160_3, <α>161_3, ⊥]  <:  CodeBase[out α162_3, ⊥, ?]
//│ ╙── because: cannot constrain  ((⊤ ∧ ⊤) ∧ <α>161_3) ∨ ⊥  <:  ⊥ ∨ ⊥
//│ Type: CodeBase[out CodeBase[out α163_3, ?, ?] ->{⊥} α163_3, out α165_2, ?]

:e
`let x = `42 `in run(x)
//│ ╔══[ERROR] Type error in term x@2#0 with expected type CodeBase[out α169_3, ⊥, ?]
//│ ╟── because: cannot constrain  CodeBase[α166_2, <α>168_3, ⊥]  <:  CodeBase[out α169_3, ⊥, ?]
//│ ╙── because: cannot constrain  ((⊤ ∧ ⊤) ∧ <α>168_3) ∨ ⊥  <:  ⊥ ∨ ⊥
//│ ╔══[ERROR] Type error in term ${run#3(x@2#0)}
//│ ╟── because: cannot constrain  α169_3  <:  CodeBase[out α170_3, out α171_3, ?]
//│ ╟── because: cannot constrain  α169_3  <:  CodeBase[in ⊥ ∨ ⊥ out ((⊤ ∧ ⊤) ∧ α170_3) ∨ ⊥, in ⊥ ∨ ⊥ out ((⊤ ∧ ⊤) ∧ α171_3) ∨ ⊥, in ⊥ ∨ ⊥ out ((⊤ ∧ ⊤) ∧ ⊤) ∨ ⊥]
//│ ╟── because: cannot constrain  α166_2  <:  CodeBase[in ⊥ ∨ ⊥ out ((⊤ ∧ ⊤) ∧ α170_3) ∨ ⊥, in ⊥ ∨ ⊥ out ((⊤ ∧ ⊤) ∧ α171_3) ∨ ⊥, in ⊥ ∨ ⊥ out ((⊤ ∧ ⊤) ∧ ⊤) ∨ ⊥]
//│ ╟── because: cannot constrain  α166_2  <:  CodeBase[in ⊥ ∨ ⊥ out (⊤ ∧ ⊤) ∧ α172_2, in ⊥ ∨ ⊥ out (⊤ ∧ ⊤) ∧ α173_2, in ⊥ ∨ ⊥ out ((⊤ ∧ ⊤) ∧ ⊤) ∨ ⊥]
//│ ╙── because: cannot constrain  Int  <:  CodeBase[in ⊥ ∨ ⊥ out (⊤ ∧ ⊤) ∧ α172_2, in ⊥ ∨ ⊥ out (⊤ ∧ ⊤) ∧ α173_2, in ⊥ ∨ ⊥ out ((⊤ ∧ ⊤) ∧ ⊤) ∨ ⊥]
//│ Type: CodeBase[⊥, ⊥, ?]
